<!DOCTYPE html>
<html>
  <head>
    <script>
    ((document) => {
        'use strict';
        let fastNode;
        let failed;
        let isRunning;
        const DEST_LIST = [
            'cdn.jsdelivr.net',
            'fastly.jsdelivr.net',
            'gcore.jsdelivr.net',
            'testingcf.jsdelivr.net',
            'test1.jsdelivr.net'
        ];
        const PREFIX = '//';
        const SOURCE = DEST_LIST[0];
        const starTime = Date.now();
        const TIMEOUT = 2000;
        const STORE_KEY = 'jsdelivr-auto-fallback';
        const TEST_PATH = '/gh/PipecraftNet/jsdelivr-auto-fallback@main/empty.css?';
        const shouldReplace = (text) => text && text.includes(PREFIX + SOURCE);
        const replace = (text) => text.replace(PREFIX + SOURCE, PREFIX + fastNode);
        const setTimeout = window.setTimeout;
        const $ = document.querySelectorAll.bind(document);

        const replaceElementSrc = () => {
            let element;
            let value;
            for (element of $('link[rel="stylesheet"]')) {
                value = element.href;
                if (shouldReplace(value) && !value.includes(TEST_PATH)) {
                    element.href = replace(value);
                }
            }

            for (element of $('script')) {
                value = element.src;
                if (shouldReplace(value)) {
                    const newNode = document.createElement('script');
                    newNode.src = replace(value);
                    element.defer = true;
                    element.src = '';
                    element.before(newNode);
                    element.remove();
                }
            }

            for (element of $('img')) {
                value = element.src;
                if (shouldReplace(value)) {
                    // Used to cancel loading. Without this line it will remain pending status.
                    element.src = '';
                    element.src = replace(value);
                }
            }

            // All elements that have a style attribute
            for (element of $('*[style]')) {
                value = element.getAttribute('style');
                if (shouldReplace(value)) {
                    element.setAttribute('style', replace(value));
                }
            }

            for (element of $('style')) {
                value = element.innerHTML;
                if (shouldReplace(value)) {
                    element.innerHTML = replace(value);
                }
            }
        };

        const tryReplace = () => {
            if (!isRunning && failed && fastNode) {
                console.warn(SOURCE + ' is not available. Use ' + fastNode);
                isRunning = true;
                setTimeout(replaceElementSrc, 0);
                // Some need to wait for a while
                setTimeout(replaceElementSrc, 20);
                // Replace dynamically added elements
                setInterval(replaceElementSrc, 500);
            }
        };

        const checkAvailable = (url, callback) => {
            let timeoutId;
            const newNode = document.createElement('link');
            const handleResult = (isSuccess) => {
                if (!timeoutId) {
                    return;
                }

                clearTimeout(timeoutId);
                timeoutId = 0;
                // Used to cancel loading. Without this line it will remain pending status.
                if (!isSuccess) newNode.href = 'data:text/plain;base64,';
                newNode.remove();
                callback(isSuccess);
            };

            timeoutId = setTimeout(handleResult, TIMEOUT);

            newNode.addEventListener('error', () => handleResult(false));
            newNode.addEventListener('load', () => handleResult(true));
            newNode.rel = 'stylesheet';
            newNode.text = 'text/css';
            newNode.href = url + TEST_PATH + starTime;
            document.head.insertAdjacentElement('afterbegin', newNode);
        };

        const cached = (() => {
            try {
                return Object.assign(
                    {},
                    JSON.parse(localStorage.getItem(STORE_KEY) || '{}')
                );
            } catch {
                return {};
            }
        })();

        const main = () => {
            cached.time = starTime;
            cached.failed = false;
            cached.fastNode = null;

            for (const url of DEST_LIST) {
                checkAvailable('https://' + url, (isAvailable) => {
                    // console.log(url, Date.now() - starTime, Boolean(isAvailable));
                    if (!isAvailable && url === SOURCE) {
                        failed = true;
                        cached.failed = true;
                    }

                    if (isAvailable && !fastNode) {
                        fastNode = url;
                    }

                    if (isAvailable && !cached.fastNode) {
                        cached.fastNode = url;
                    }

                    tryReplace();
                });
            }

            setTimeout(() => {
                // If all domains are timeout
                if (failed && !fastNode) {
                    fastNode = DEST_LIST[1];
                    tryReplace();
                }

                localStorage.setItem(STORE_KEY, JSON.stringify(cached));
            }, TIMEOUT + 100);
        };

        if (
            cached.time &&
            starTime - cached.time < 60 * 60 * 1000 &&
            cached.failed &&
            cached.fastNode
        ) {
            failed = true;
            fastNode = cached.fastNode;
            tryReplace();
            setTimeout(main, 1000);
        } else {
            main();
        }
    })(document);
</script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
    <link rel="icon" href="https://fastly.jsdelivr.net/gh/openutx/static/image/fav.ico">
    <!-- surprise form lijiawei -->
    <title>UTX Report </title>
    
    <!--[if lt IE 9]>
    <script defer src="https://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
    <script defer src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="https://fastly.jsdelivr.net/gh/openutx/static/css/report.css" rel="stylesheet">

    <script defer src="https://fastly.jsdelivr.net/gh/openutx/static/js/jquery-1.10.2.min.js"></script>
    <script defer src="https://fastly.jsdelivr.net/gh/openutx/static/js/jquery-lang.js" charset="utf-8" type="text/javascript"></script>
    <script defer src="https://fastly.jsdelivr.net/gh/openutx/static/js/langpack/zh_CN.js" charset="utf-8" type="text/javascript"></script>
    <script defer src="https://fastly.jsdelivr.net/gh/openutx/static/js/lazyload.js" charset="utf-8" type="text/javascript"></script>
    <script defer type="text/javascript">
      data = {"steps": [{"title": "Touch", "time": 1665392619.756913, "code": {"name": "touch", "args": [{"key": "v", "value": {"filename": "tpl1665138699549.png", "_filepath": "..\\..\\../suites/airtestdemo.air/tpl1665138699549.png", "threshold": 0.7, "target_pos": 5, "record_pos": [-0.421, -0.965], "resolution": [1080, 2400], "rgb": false, "scale_max": 800, "scale_step": 0.005, "__class__": "Template"}, "image": "..\\..\\../suites/airtestdemo.air/tpl1665138699549.png", "resolution": [117, 110]}, {"key": "kwargs", "value": {}}, {"key": "times", "value": 1}]}, "screen": {"src": "..\\..\\../suites/airtestdemo.air/log/SM-G9960 Android 12/1665392618969.jpg", "rect": [{"left": 27, "top": 103.79999999999995, "width": 117, "height": 110.0}], "pos": [[85, 158]], "vector": [], "confidence": 1.0, "resolution": [1080, 2400], "_filepath": "..\\..\\../suites/airtestdemo.air/log/SM-G9960 Android 12/1665392618969.jpg", "thumbnail": "..\\..\\../suites/airtestdemo.air/log/SM-G9960 Android 12/1665392618969_small.jpg"}, "desc": "Touch target image", "traceback": "", "log": "", "assert": null}, {"title": "Assert exists", "time": 1665392619.949146, "code": {"name": "assert_exists", "args": [{"key": "v", "value": {"filename": "tpl1665138740937.png", "_filepath": "..\\..\\../suites/airtestdemo.air/tpl1665138740937.png", "threshold": 0.7, "target_pos": 5, "record_pos": [-0.378, -0.776], "resolution": [1080, 2400], "rgb": false, "scale_max": 800, "scale_step": 0.005, "__class__": "Template"}, "image": "..\\..\\../suites/airtestdemo.air/tpl1665138740937.png", "resolution": [224, 127]}, {"key": "msg", "value": "Please fill in the test point."}]}, "screen": {"src": "..\\..\\../suites/airtestdemo.air/log/SM-G9960 Android 12/1665392619908.jpg", "rect": [{"left": 20, "top": 299.91999999999996, "width": 224, "height": 127.0}], "pos": [[132, 363]], "vector": [], "confidence": 0.9998986721038818, "resolution": [1080, 2400], "_filepath": "..\\..\\../suites/airtestdemo.air/log/SM-G9960 Android 12/1665392619908.jpg", "thumbnail": "..\\..\\../suites/airtestdemo.air/log/SM-G9960 Android 12/1665392619908_small.jpg"}, "desc": "Assert target image exists", "traceback": "", "log": "", "assert": "Please fill in the test point."}, {"title": "Assert not exists", "time": 1665392622.401654, "code": {"name": "assert_not_exists", "args": [{"key": "v", "value": {"filename": "tpl1665138699549.png", "_filepath": "..\\..\\../suites/airtestdemo.air/tpl1665138699549.png", "threshold": 0.7, "target_pos": 5, "record_pos": [-0.421, -0.965], "resolution": [1080, 2400], "rgb": false, "scale_max": 800, "scale_step": 0.005, "__class__": "Template"}, "image": "..\\..\\../suites/airtestdemo.air/tpl1665138699549.png", "resolution": [117, 110]}, {"key": "msg", "value": "hi"}]}, "screen": {"src": "..\\..\\../suites/airtestdemo.air/log/SM-G9960 Android 12/1665392622360.jpg", "rect": [], "pos": [], "vector": [], "confidence": null, "resolution": [1080, 2400], "_filepath": "..\\..\\../suites/airtestdemo.air/log/SM-G9960 Android 12/1665392622360.jpg", "thumbnail": "..\\..\\../suites/airtestdemo.air/log/SM-G9960 Android 12/1665392622360_small.jpg"}, "desc": "Assert target image does not exists", "traceback": "", "log": "", "assert": "hi"}], "name": "..\\..\\../suites/airtestdemo.air", "scale": 0.5, "test_result": true, "run_end": 1665392622.401654, "run_start": 1665392618.872994, "static_root": "https://fastly.jsdelivr.net/gh/openutx/static/", "lang": "en", "records": [], "info": {"name": "airtestdemo.air", "path": "..\\..\\../suites/airtestdemo.air/airtestdemo.py", "author": "manlokfaicharlie", "title": "", "desc": ""}, "log": "../../../suites/airtestdemo.air/log/SM-G9960 Android 12/log.txt", "console": "", "data": "{\"steps\": [{\"title\": \"Touch\", \"time\": 1665392619.756913, \"code\": {\"name\": \"touch\", \"args\": [{\"key\": \"v\", \"value\": {\"filename\": \"tpl1665138699549.png\", \"_filepath\": \"..\\..\\../suites/airtestdemo.air/tpl1665138699549.png\", \"threshold\": 0.7, \"target_pos\": 5, \"record_pos\": [-0.421, -0.965], \"resolution\": [1080, 2400], \"rgb\": false, \"scale_max\": 800, \"scale_step\": 0.005, \"__class__\": \"Template\"}, \"image\": \"..\\..\\../suites/airtestdemo.air/tpl1665138699549.png\", \"resolution\": [117, 110]}, {\"key\": \"kwargs\", \"value\": {}}, {\"key\": \"times\", \"value\": 1}]}, \"screen\": {\"src\": \"..\\..\\../suites/airtestdemo.air/log/SM-G9960 Android 12/1665392618969.jpg\", \"rect\": [{\"left\": 27, \"top\": 103.79999999999995, \"width\": 117, \"height\": 110.0}], \"pos\": [[85, 158]], \"vector\": [], \"confidence\": 1.0, \"resolution\": [1080, 2400], \"_filepath\": \"..\\..\\../suites/airtestdemo.air/log/SM-G9960 Android 12/1665392618969.jpg\", \"thumbnail\": \"..\\..\\../suites/airtestdemo.air/log/SM-G9960 Android 12/1665392618969_small.jpg\"}, \"desc\": \"Touch target image\", \"traceback\": \"\", \"log\": \"\", \"assert\": null}, {\"title\": \"Assert exists\", \"time\": 1665392619.949146, \"code\": {\"name\": \"assert_exists\", \"args\": [{\"key\": \"v\", \"value\": {\"filename\": \"tpl1665138740937.png\", \"_filepath\": \"..\\..\\../suites/airtestdemo.air/tpl1665138740937.png\", \"threshold\": 0.7, \"target_pos\": 5, \"record_pos\": [-0.378, -0.776], \"resolution\": [1080, 2400], \"rgb\": false, \"scale_max\": 800, \"scale_step\": 0.005, \"__class__\": \"Template\"}, \"image\": \"..\\..\\../suites/airtestdemo.air/tpl1665138740937.png\", \"resolution\": [224, 127]}, {\"key\": \"msg\", \"value\": \"Please fill in the test point.\"}]}, \"screen\": {\"src\": \"..\\..\\../suites/airtestdemo.air/log/SM-G9960 Android 12/1665392619908.jpg\", \"rect\": [{\"left\": 20, \"top\": 299.91999999999996, \"width\": 224, \"height\": 127.0}], \"pos\": [[132, 363]], \"vector\": [], \"confidence\": 0.9998986721038818, \"resolution\": [1080, 2400], \"_filepath\": \"..\\..\\../suites/airtestdemo.air/log/SM-G9960 Android 12/1665392619908.jpg\", \"thumbnail\": \"..\\..\\../suites/airtestdemo.air/log/SM-G9960 Android 12/1665392619908_small.jpg\"}, \"desc\": \"Assert target image exists\", \"traceback\": \"\", \"log\": \"\", \"assert\": \"Please fill in the test point.\"}, {\"title\": \"Assert not exists\", \"time\": 1665392622.401654, \"code\": {\"name\": \"assert_not_exists\", \"args\": [{\"key\": \"v\", \"value\": {\"filename\": \"tpl1665138699549.png\", \"_filepath\": \"..\\..\\../suites/airtestdemo.air/tpl1665138699549.png\", \"threshold\": 0.7, \"target_pos\": 5, \"record_pos\": [-0.421, -0.965], \"resolution\": [1080, 2400], \"rgb\": false, \"scale_max\": 800, \"scale_step\": 0.005, \"__class__\": \"Template\"}, \"image\": \"..\\..\\../suites/airtestdemo.air/tpl1665138699549.png\", \"resolution\": [117, 110]}, {\"key\": \"msg\", \"value\": \"hi\"}]}, \"screen\": {\"src\": \"..\\..\\../suites/airtestdemo.air/log/SM-G9960 Android 12/1665392622360.jpg\", \"rect\": [], \"pos\": [], \"vector\": [], \"confidence\": null, \"resolution\": [1080, 2400], \"_filepath\": \"..\\..\\../suites/airtestdemo.air/log/SM-G9960 Android 12/1665392622360.jpg\", \"thumbnail\": \"..\\..\\../suites/airtestdemo.air/log/SM-G9960 Android 12/1665392622360_small.jpg\"}, \"desc\": \"Assert target image does not exists\", \"traceback\": \"\", \"log\": \"\", \"assert\": \"hi\"}], \"name\": \"..\\..\\../suites/airtestdemo.air\", \"scale\": 0.5, \"test_result\": true, \"run_end\": 1665392622.401654, \"run_start\": 1665392618.872994, \"static_root\": \"https://fastly.jsdelivr.net/gh/openutx/static/\", \"lang\": \"en\", \"records\": [], \"info\": {\"name\": \"airtestdemo.air\", \"path\": \"..\\..\\../suites/airtestdemo.air/airtestdemo.py\", \"author\": \"manlokfaicharlie\", \"title\": \"\", \"desc\": \"\"}, \"log\": \"../../../suites/airtestdemo.air/log/SM-G9960 Android 12/log.txt\", \"console\": \"\"}"};
      lang = new Lang();
      lang.init({
        defaultLang: 'en',
        currentLang: 'en'
      });
    </script>
  </head>

  <body>

    <div class="container-fluid">
      <div class="row">

        <div id="main" class="main col-md-12">
          <div id="back_multi"></div>
          <h1 class="title">UTX Report </h1>
          
          <div class="summary" >

            <div class="show-horizontal">
              <div class="info info1">
                <div class="info-left">
                  <img id='result-img' />
                </div>
                <div class="info-right">
                  <div class="info-title"><span lang='en'>UTX Report</span>
                    <label id='result-desc' lang="en"></label>
                  </div>
                  <div class="info-content">
                    <div class='info-sub start'></div>
                    <div class='info-sub time'></div>
                  </div>
                  <div class="info-toal">
                    <div class="info-step">
                      <span class="info-name" lang="en">Steps: </span>
                      <span class="info-value">3</span>
                    </div>
                    <div class="info-time">
                      <span class="info-name" lang="en">Time: </span>
                      <span class="info-value duration">xxx</span>
                    </div>
                    
                    
                    <div class="info-log">
                      <span class="info-name" lang="en">Log: </span>
                      <span class="info-value log">
                        <a href="../../../suites/airtestdemo.air/log/SM-G9960 Android 12/log.txt" target="_blank" download="log.txt">log.txt <img src="https://fastly.jsdelivr.net/gh/openutx/static/image/download_log.svg" /></a>
                      </span>
                    </div>
                    
                  </div>
                </div>
              </div>

              <div class="info info2">
                <div class="info-left"></div>
                <div class="info-right">
                  <div class="info-title"><span lang='en'>Executors</span></div>
                  <div class="info-content">
                    <div class="info-execute">
                      <div class="circle-img"></div>
                      
                        <div class="info-name"><span lang="en">Author:</span> manlokfaicharlie</div>
                      
                    </div>
                    <div class="info-execute">
                      <div class="circle-img"></div>
                      <div class="info-file" title="/Users/manlokfaicharlie/Desktop/pytestwithairtest/utx/utx/artaAPP/suites/airtestdemo.air/airtestdemo.py">airtestdemo.air
                        <img id="copy_path" path="/Users/manlokfaicharlie/Desktop/pytestwithairtest/utx/utx/artaAPP/suites/airtestdemo.air/airtestdemo.py" title="copy file path to clipboard" src="https://fastly.jsdelivr.net/gh/openutx/static/image/copy.svg" />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            
          </div>
          <div class="device" id='device'>
          </div>
          <!-- 可以额外显示自定义模块，支持插入Html内容 -->
          
          <div class="gallery">
            <div class="info-title"><span lang="en">Quick view</span></div>
            <div class="content">
            </div>
          </div>

          <!--单步-->
          

          <div class="steps">
            <div class="content">
              <div class="steps-head">
                <div class="head-left">
                  <div class="order" id='order'><span lang="en">order</span></div>
                  <div class="order" id='duration'><span lang="en">duration</span></div>
                  <div class="order" id='status'><span lang="en">status</span></div>
                </div>
                <div class="head-right">
                  <span lang="en" class="jump-wrong" id='jump-wrong'>Jump to wrong step</span>
                  <span lang="en">Filter by:</span>
                  <span class="filters">
                    <span lang="en" class="filter" id="all" alt="show all steps">All</span>
                    <span lang="en" class="filter" id='success' alt="show success steps only">Success</span>
                    <span lang="en" class="filter" id='fail' alt="show failed steps only">Failed</span>
                    <span lang="en" class="filter" id="assert" alt="show steps with assertion only">Assert</span>
                  </span>
                </div>
              </div>
              <div class="steps-content">
                <div class="step-left" id='step-left'>
                  <div class="step-list"></div>
                  <div id="pageTool"></div>
                </div>
                <div class="step-right" id='step-right'></div>
              </div>
            </div>
            
            </div>
        </div>

      
      <div class="footer" style="text-align: center">
        <div class="footer-content" >
            <div class="foo">
                <span lang="en">© 2019 - 2022 UTX, Inc. All Rights Reserved.</span>
            </div>
          </div>
        </div>
      </div>
      
      </div>
      <!-- 录屏 -->
      <div class="row gif-wrap show">
          <div class="menu">
            <div class="pattern pattern1">
              <div class="minimize">
                <img title="minimize" src="https://fastly.jsdelivr.net/gh/openutx/static/image/minimize.svg" />
              </div>
              <div class="close">
                <img title="close" src="https://fastly.jsdelivr.net/gh/openutx/static/image/close.svg" />
              </div>
            </div>
            <div class="pattern pattern2">
              <div class="maximize">
                <img title="maximize" src="https://fastly.jsdelivr.net/gh/openutx/static/image/maximize.svg" />
              </div>
            </div>
          </div>
          <div class="col-md-6">
            
          </div>
        </div>
        <!-- max pic -->
      <div id='magnify' class="mask hide">
        <div class="content">
        </div>
      </div>
    </div>

  <link href="https://fastly.jsdelivr.net/gh/openutx/static/css/monokai_sublime.min.css" rel="stylesheet">
  <script defer src="https://fastly.jsdelivr.net/gh/openutx/static/js/highlight.min.js"></script>
  <script defer type="text/javascript" src="https://fastly.jsdelivr.net/gh/openutx/static/js/paging.js"></script>
  <script defer src="https://fastly.jsdelivr.net/gh/openutx/static/js/report.js"></script>
</body>
</html>